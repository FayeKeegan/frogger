var QSC=QSC||{};QSC.apps=QSC.apps||{};QSC.apps.jCarousel=QSC.apps.jCarousel||{};QSC.apps.jCarousel.circularHelper=(function(){var f=function(y,u){var u=u||0,z=y.clip,k=z.find("LI"),o=y.options.QSCconfig.items.length,p=(typeof(y.options.QSCconfig.buffer)!=="undefined"?y.options.QSCconfig.buffer:0.1),t=0,n=null,w=false;if(y.options.vertical){var m=z.offset().top,s=z.height();for(var r=k.length,q=u;q<r&&t<o;q++,t++){var x=k.eq(q),v=x.height();if(x.offset().top-m+v>s+Math.ceil(v*p)){n=t;break}}}else{var m=z.offset().left,l=z.width();for(var r=k.length,q=u;q<r&&t<o;q++,t++){var x=k.eq(q),j=x.width();if(x.offset().left-m+j>l+Math.ceil(j*p)){n=t;break}}}if(n==null){n=t}if(n>=o){w=true}if(n==0){n=1}d(y,w,u);y.options.scroll=n};var d=function(k,j,l){if(j){h(k,k.options.QSCconfig.items.length+l);k.buttonNext[0].style.display="none";k.buttonPrev[0].style.display="none"}else{k.buttonNext[0].style.display="block";k.buttonPrev[0].style.display="block"}g(k)};var h=function(k,j){k.list.find("LI:gt("+String(j-1)+")").remove()};var i=function(n,k){var j=n.options.QSCconfig.items[k],l=n.options.QSCconfig.template,m=n.options._imageCache[k];l=l.replace(/\{([^}]+)\}/g,function(q,p){if(j[p]||j[p]===""){return j[p]}});var o=$(l)[0];if(m){$("a:first",o).html(m.cloneNode(false))}else{$("tr:first",o).remove()}return o};var a=function(n){var l=n.options.QSCconfig.items,k=n.options._imageCache=[];for(var j=l.length,m=0;m<j;m++){k[m]=b(n,l[m])}};var b=function(m,k){if(!k.imageURL){return null}var j=document.createElement("img");if(!k.dimensions){j.style.display="none";return j}var l=/^width="([\d]+)" height="([\d]+)"$/.exec(k.dimensions);if(!l){j.style.display="none";return j}j.onload=function(){this.width=l[1];this.height=l[2];g(m)};j.src=k.imageURL;j.width=l[1];j.height=l[2];j.title=j.alt=k.imageAltText;return j};var c=function(l){for(var j=l.options.QSCconfig.items.length,k=0;k<j&&k<50;k++){l.add(k+1,i(l,k))}};var g=function(k,j){if(!k.options.vertical&&(j||k.list.height()>k.clip.height())){k.clip.height(k.list.height())}};var e=function(j){f(j)};return{setScroll:function(l,k,j){if(k==="next"){f(l,l.options.scroll)}if(k==="prev"){f(l)}},createCarouselItem:function(o,m,l,n,k){if(n==="init"){h(o,o.options.QSCconfig.items.length);return}var j=o.index(l,o.options.QSCconfig.items.length);o.add(l,i(o,j-1))},removeCarouselItem:function(n,l,k,m,j){n.remove(k)},onInit:function(k,j){k.create_WRAPPED=k.create;k.create=function(m){var n=this.create_WRAPPED(m),l=k.index(m,k.options.QSCconfig.items.length)-1;n.append(i(this,l));return n};a(k);c(k);g(k,true);e(k)}}})();
